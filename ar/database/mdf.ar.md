{
  "date" : "2020-11-11",
  "keywords" :["MDF" , "امتداد" , "ملف" , "تنسيق الملف" , "نوع ملف قاعدة البيانات" , "تنسيق ملف قاعدة البيانات" , "ملفات قاعدة البيانات"] ,
  "author" : {
    "display_name" : "Kashif Iqbal"
} ,
  "draft" : "false",
  "toc" : true,
  "description" :"تعرف على تنسيق ملف MDF وواجهات برمجة التطبيقات التي يمكنها إنشاء ملفات MDF وفتحها." ,
  "title" :"تنسيق ملف MDF - ملف قاعدة بيانات SQL Server الرئيسية" ,
  "linktitle" : "MDF",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
} ,
  "lastmod" : "2020-08-12"
}

## ما هو ملف MDF؟

الملف بامتداد .mdf هو ملف قاعدة بيانات رئيسي يستخدمه [Microsoft SQL Server](https://en.wikipedia.org/wiki/Microsoft_SQL_Server) لتخزين بيانات المستخدم. إنه ذو أهمية قصوى حيث يتم تخزين جميع البيانات في هذا الملف. يخزن ملف MDF بيانات المستخدمين في قواعد البيانات العلائقية في أعمدة النموذج والصفوف والحقول والفهارس وطرق العرض والجداول. يسمح SQL Server بضبط إعدادات autogrow والتقلص التلقائي ليكون لها تأثير إيجابي على أداء قاعدة البيانات. يمكن تحميل ملفات MDF وإرفاقها بقاعدة بيانات باستخدام Microsoft SQL Server. تحتوي ملفات MDF على نوع mime Application / octet-Stream.

## تنسيق ملف MDF

تعتبر الصفحة هي الوحدة الأساسية لتخزين البيانات في SQL Server. يتم تقسيم صفحة التخزين المخصصة لقاعدة البيانات إلى صفحات منطقية مرقمة من 0 إلى n. تبدأ الصفحة الواحدة برأس 96 بايت يتكون من معرف الصفحة ونوع البنية التي تنتمي إليها الصفحة وعدد السجلات في الصفحة والمؤشرات إلى الصفحات السابقة والتالية.

### بنية الملف

يحتوي ملف MDF على بنية البيانات التالية.

* الصفحة 0: الرأس
* الصفحة 1: أول PFS
* الصفحة 2: أول GAM
* الصفحة 3: أول SGAM
* الصفحة 4: غير مستخدمة
* الصفحة 5: غير مستخدمة
* الصفحة 6: أول DCM
* الصفحة 7: أول مليار متر مكعب

#### رأس الملف

يحتوي رقم الصفحة 0 لجميع الملفات على رأس يخزن البيانات الأولية حول الملف.

#### المساحة الحرة للصفحة (PFS)
يحدد PFS حالة التخصيص ويحدد مقدار المساحة الخالية.

* البت 1: يشير إلى ما إذا كانت الصفحة مخصصة أم لا.
* البت 2: يشير إلى ما إذا كانت الصفحة من مدى مختلط.
* البت 3: يشير إلى أن هذه الصفحة هي صفحة IAM.
* البت 4: يشير إلى أن هذه الصفحة تحتوي على سجلات شبح
* البتات من 5 إلى 7: قيمة مجمعة مكونة من ثلاث بتات ، والتي تشير إلى امتلاء الصفحة كما يلي:
* 0: الصفحة فارغة
* 1: الصفحة ممتلئة بنسبة 1–50٪
* 2: الصفحة ممتلئة بنسبة 51-80٪
* 3: الصفحة ممتلئة بنسبة 81-95٪
* 4: الصفحة ممتلئة بنسبة 96-100٪

## مراجع

* [ملفات قاعدة البيانات ومجموعات الملفات](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroups؟view=sql-server-ver15)
* [فصل وإرفاق قاعدة البيانات - SQL Server](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-detach-and-attach-sql-server؟view=sql-server - أكثر من 15)
* [تحليل تشريح ملف بيانات خادم SQL](https://blog.pythian.com/analyzing-sql-server-data-file-anatomy/)

