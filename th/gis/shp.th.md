{
  "date" : "2019-10-11",
  "keywords" :[ "ไฟล์ shp", "รูปแบบไฟล์ shp", "ไฟล์ shp คืออะไร", "ไฟล์", "ตัวอย่าง shp", "นามสกุลไฟล์ shp","นามสกุล", "รูปแบบ" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"SHP - ESRI Shapefile",
  "description":"เรียนรู้เกี่ยวกับรูปแบบไฟล์ SHP และ API ที่สามารถสร้างและเปิดไฟล์ SHP",
  "linktitle" : "SHP",
  "menu" : {
    "docs" : {
      "parent" : "gis"
}
},
  "lastmod" : "2019-09-10"
}

## ไฟล์ SHP คืออะไร??

SHP เป็นนามสกุลไฟล์สำหรับประเภทไฟล์หลักที่ใช้แทน ESRI Shapefile แสดงข้อมูลเชิงพื้นที่ในรูปแบบของข้อมูลเวกเตอร์ที่จะใช้โดยแอปพลิเคชันระบบสารสนเทศภูมิศาสตร์ (GIS) รูปแบบได้รับการพัฒนาเป็นข้อกำหนดแบบเปิดเพื่ออำนวยความสะดวกในการทำงานร่วมกันระหว่าง ESRI และผลิตภัณฑ์ซอฟต์แวร์อื่น ๆ

## การเป็นตัวแทนข้อมูล

ตามที่กล่าวไว้ รูปแบบไฟล์รูปร่างอธิบายข้อมูลเชิงพื้นที่ของชุดข้อมูลเป็นคุณลักษณะเวกเตอร์ คุณสมบัติเวกเตอร์เหล่านี้รวมถึง:

* คะแนน
* เส้น
* รูปหลายเหลี่ยม

คุณลักษณะเหล่านี้เมื่อรวมกันสามารถแสดงรูปร่างได้เกือบทุกประเภท เช่น บ่อน้ำ ขอบเขตประเทศ จุดเชิงพื้นที่ การไหลของแม่น้ำ ทะเลสาบ ฯลฯ คุณลักษณะเวกเตอร์แต่ละรายการสามารถมีคุณลักษณะที่กำหนดวัตถุประสงค์ของคุณลักษณะนั้น ตัวอย่างเช่น ไฟล์รูปร่างที่มีเมืองลอสแองเจลิสสามารถมีชื่อเมืองและอุณหภูมิเป็นแอตทริบิวต์ซึ่งให้ความหมายแทนข้อมูลเชิงพื้นที่

## ไฟล์ที่เกี่ยวข้อง

ซอฟต์แวร์แอปพลิเคชันไม่สามารถใช้ไฟล์ shp แบบสแตนด์อโลนเพื่อสร้างความหมายของข้อมูลที่มีอยู่ได้ เพื่อให้เข้าใจถึงข้อมูลที่มีอยู่ในไฟล์ดังกล่าว Shapefile จึงใช้ไฟล์ที่จำเป็นเพิ่มเติมดังต่อไปนี้

* ไฟล์ shx - ไฟล์ดัชนี
* ไฟล์ dbf - ไฟล์ dBASE ที่เก็บคุณลักษณะทั้งหมดของรูปร่างในไฟล์หลัก
* ไฟล์ prj - เก็บข้อมูลโครงการของไฟล์

อาจมีไฟล์ทางเลือกอื่นที่ใช้ชื่อเดียวกันกับไฟล์หลักได้เช่นกัน

## ข้อมูลจำเพาะรูปแบบไฟล์ SHP

ข้อมูลจำเพาะแบบเปิดของไฟล์รูปร่างมีให้ทางออนไลน์จาก ESRI ในรูปแบบของ [คำอธิบายทางเทคนิค](https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf) และอธิบายโครงสร้างโดยรวมของไฟล์โดยละเอียด ข้อมูลในไฟล์ .shp หลักประกอบด้วยส่วนหัวและระเบียน ส่วนหัวของไฟล์ที่มีความยาวคงที่ตามด้วยเร็กคอร์ดที่มีความยาวผันแปรได้ ซึ่งทุกเร็กคอร์ดประกอบด้วยส่วนหัวของเร็กคอร์ดที่มีความยาวคงที่ ตามด้วยเนื้อหาของเร็กคอร์ดที่มีความยาวผันแปรได้

### ส่วนหัวของไฟล์ SHP หลัก

ส่วนหัวของไฟล์หลักเริ่มจากจุดเริ่มต้นของไฟล์และมีความยาว 100 ไบต์ การจัดระเบียบส่วนหัวของไฟล์หลักนี้พร้อมกับตำแหน่งไบต์ ค่า ประเภท และลำดับไบต์ดังแสดงในตารางต่อไปนี้


|ไบต์|ฟิลด์|ค่า|ประเภท|ลำดับไบต์
---|---|---|---|---|
|0-3|รหัสไฟล์|9994|จำนวนเต็ม|Big Endian
|4-23|ไม่ได้ใช้|0|จำนวนเต็ม|บิ๊กเอนเดียน
|24-27|ความยาวไฟล์|ความยาวไฟล์|จำนวนเต็ม|Big Endian
|28-31|เวอร์ชัน|1000|จำนวนเต็ม|Little Endian
|32-35|ประเภทรูปร่าง|ประเภทรูปร่าง|จำนวนเต็ม|Little Endian
|36-67|สี่เหลี่ยมผืนผ้าขั้นต่ำ|Xmin, Ymin, Xmax และ Ymax|double|Little Endian
|68-83|กรอบเขตแดน|Zmin, Zmax|double|Little Endian
|84-99|กรอบสี่เหลี่ยม|Mmin, Mmax|double|

โปรดทราบว่าค่าของความยาวไฟล์คือความยาวทั้งหมดของไฟล์ในคำ 16 บิต ซึ่งรวมถึงคำ 16 บิต 50 คำที่ประกอบเป็นส่วนหัวด้วย

#### ประเภทรูปร่าง

ค่าของฟิลด์ประเภทรูปร่างในตารางด้านบนมีดังนี้:


|ค่า|ประเภทรูปร่าง
---|---|
|0|รูปทรงว่าง
|1|จุด
|3|โพลีไลน์
|5|รูปหลายเหลี่ยม
|8|หลายจุด
|11|PointZ
|13|โพลีไลน์Z
|15|รูปหลายเหลี่ยมZ
|18|มัลติพอยต์Z
|21|พอยต์เอ็ม
|23|โพลีไลน์เอ็ม
|25|รูปหลายเหลี่ยมM
|28|มัลติพอยต์เอ็ม
|31|มัลติแพตช์

### บันทึกข้อมูล ###

ส่วนหัวของไฟล์หลักตามด้วยเร็กคอร์ดที่มีความยาวผันแปรได้ โดยที่แต่ละเร็กคอร์ดประกอบด้วยส่วนหัวของเร็กคอร์ดที่มีความยาวคงที่ ตามด้วยเนื้อหาของเร็กคอร์ดที่มีความยาวผันแปรได้

#### ส่วนหัวของบันทึก ####

ส่วนหัวของเรคคอร์ดมีข้อมูลเกี่ยวกับหมายเลขเรคคอร์ดและความยาวเนื้อหาของเรคคอร์ดในความยาวคงที่ 8 ไบต์ การจัดส่วนหัวของเรคคอร์ดมีดังนี้:


|ไบต์|ฟิลด์|ค่า|ประเภท|ลำดับไบต์
---|---|---|---|---|
|0-3|บันทึกหมายเลข|บันทึกหมายเลข|จำนวนเต็ม|ใหญ่
|4-7|ความยาวเร็กคอร์ด|ความยาวเร็กคอร์ด|จำนวนเต็ม|ขนาดใหญ่

#### บันทึกเนื้อหา ####

เนื้อหาบันทึกไฟล์รูปร่างประกอบด้วยประเภทรูปร่างตามด้วยข้อมูลทางเรขาคณิตสำหรับรูปร่างนั้น รูปร่างประเภท 0 แสดงถึงรูปร่างว่างที่ไม่มีข้อมูลทางเรขาคณิตสำหรับรูปร่างนั้น ความยาวของเนื้อหาบันทึกสะท้อนถึงส่วนรูปร่างและจุดยอด ลองใช้ตัวอย่างประเภท Point Shape เพื่ออธิบายว่าระเบียนมีข้อมูลเกี่ยวกับประเภทรูปร่างดังกล่าวอย่างไร

จุดแสดงถึงตำแหน่งทางภูมิศาสตร์ที่แน่นอนในลำดับ X,Y โดยที่แต่ละพิกัดจะแสดงด้วยค่าความแม่นยำสองเท่า ตารางต่อไปนี้แสดงการจัดเรียงของประเภทรูปร่างจุด


|ไบต์|ประเภทรูปร่าง|ค่า|ประเภท|จำนวน|ลำดับไบต์
---|---|---|---|---|---|
|0-3|ประเภทรูปร่าง|1|จำนวนเต็ม|1|ลิตเติ้ล
|4-11|X|X|double|1|Little
|12-19|ย|ย|คู่|1|น้อย

ตัวอย่างของรูปร่างประเภทอื่นๆ สามารถพบได้ในเอกสารคำอธิบายทางเทคนิคของ ESRI

## อ้างอิง ##

* [คำอธิบายทางเทคนิคของ ESRI Shapefile](https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf) โดย ESRI

