{
  "date" : "2022-08-19",
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"ไฟล์ MDMP - รูปแบบไฟล์ Windows Minidump",
  "description":"เรียนรู้เกี่ยวกับรูปแบบไฟล์ MDMP และ API ที่สามารถสร้างและเปิดไฟล์ MDMP",
  "linktitle" : "MDMP",
  "menu" : {
    "docs" : {
      "parent" : "system"
}
},
  "lastmod" : "2022-08-19"
}

## ไฟล์ MDMP คืออะไร??

ไฟล์ MDMP คือการถ่ายโอนข้อมูลหน่วยความจำของแอปพลิเคชันบน Microsoft Windows ซึ่งสร้างขึ้นเมื่อแอปพลิเคชันปิดอย่างผิดปกติหรือหยุดทำงาน ประกอบด้วยข้อมูลและดัมพ์ข้อมูลที่สามารถใช้เพื่อแก้ไขจุดบกพร่องสาเหตุของการหยุดทำงาน ไฟล์ MDMP ใช้ได้กับแอปพลิเคชันที่สร้างโดยแพลตฟอร์มใดๆ เช่น Java, C++, .NET และอื่นๆ นอกจาก MDMP แล้ว

แอปพลิเคชันที่สามารถเปิดไฟล์ MDMP ได้แก่ Microsoft Visual Studio Debugger

## รูปแบบไฟล์ MDMP

ไฟล์ MDMP จะถูกบันทึกเป็นไฟล์ไบนารีลงในดิสก์และสามารถเปิดได้ด้วยดีบักเกอร์ Microsoft Visual Studio ประกอบด้วยข้อมูลต่อไปนี้เพื่อช่วยระบุสาเหตุของข้อขัดข้อง

* รายละเอียดของข้อความ Stop พารามิเตอร์ และข้อมูลอื่นๆ
* รายการไดรเวอร์ที่โหลด
* บริบทตัวประมวลผล (PRCB) สำหรับตัวประมวลผลที่หยุดทำงาน
* ประมวลผลข้อมูลและบริบทเคอร์เนล (EPROCESS) สำหรับกระบวนการที่หยุดทำงาน
* ข้อมูลการประมวลผลและบริบทเคอร์เนล (ETHREAD) สำหรับเธรดที่หยุดทำงาน
* สแตกการเรียกโหมดเคอร์เนลสำหรับเธรดที่หยุดทำงาน

ข้อมูลนี้ช่วยในการค้นหาว่าเกิดอะไรขึ้น แก้ไขปัญหา และป้องกันไม่ให้เกิดขึ้นอีก

### วิเคราะห์ Minidump

Windows ต้องใช้ไฟล์เพจบนไดรฟ์ข้อมูลสำหรับเริ่มระบบเพื่อสร้างไฟล์การถ่ายโอนข้อมูลหน่วยความจำ แฟ้มเพจถูกสร้างขึ้นบนไดรฟ์ข้อมูลสำหรับเริ่มระบบ และควรมีขนาดอย่างน้อย 2 เมกะไบต์ (MB) ไฟล์ดัมพ์ถูกสร้างขึ้นเมื่อแอปพลิเคชันขัดข้อง ในกรณีที่เกิดปัญหาครั้งที่สอง ไฟล์ดัมพ์หน่วยความจำขนาดเล็กไฟล์ที่สองจะถูกสร้างขึ้นในขณะที่ไฟล์ก่อนหน้าถูกรักษาไว้ ชื่อของไฟล์ดัมพ์นั้นแตกต่างกันเพื่อหลีกเลี่ยงการเขียนทับ

Windows เก็บรายการไฟล์การถ่ายโอนข้อมูลหน่วยความจำทั้งหมดไว้ในโฟลเดอร์ %SystemRoot%\Minidump คุณสามารถวิเคราะห์ไฟล์ MDMP ได้โดยการเรียกใช้งานใน Visual Studio Debugger ตามที่ระบุไว้ในขั้นตอนด้านล่าง

## ฉันจะเปิดไฟล์ MDMP ใน Visual Studio ได้อย่างไร

สามารถใช้ขั้นตอนต่อไปนี้เพื่อเปิดไฟล์ MDMP ใน Visual Studio

* ใน Visual Studio จากเมนู File เลือก Open | แครชดัมพ์.
* ไปที่ไฟล์ดัมพ์ที่คุณต้องการเปิด
* เลือกเปิด

## อ้างอิง

* [วิธีอ่านไฟล์การถ่ายโอนข้อมูลหน่วยความจำขนาดเล็กที่สร้างโดย Windows หากเกิดปัญหาขึ้น](https://learn.microsoft.com/en-us/troubleshoot/windows-client/performance/read-small-memory-dump-file)

