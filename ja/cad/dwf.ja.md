{
  "date" : "2020-03-16",
  "keywords" :["DWF","ファイル形式","開く","読み取る","作成する","CAD"],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"DWF ファイル形式と,DWF ファイルを作成して開くことができる API について学びます。",
  "title" :"DWFファイル形式",
  "linktitle" : "DWF",
  "menu" : {
    "docs" : {
      "parent" : "cad"
}
},
  "lastmod" : "2019-09-10"
}

## DWF ファイルとは

Design Web Format (DWF) は、デザイン ファイルを表示、レビュー、または印刷するための圧縮形式の 2D/3D 図面を表します。設計データの一部としてグラフィックスとテキストが含まれており、圧縮形式によりファイルのサイズが小さくなっています。ファイル サイズの縮小により、豊富な設計データの配布と伝達が効率的になります。 DWF では、元の図面を作成した CAD ソフトウェアの使用法を受信者が知る必要はありません。 DWF ファイル形式のコンテンツは、単一のシートだけを含むシンプルなものから、フォント、色、およびイメージを含む複雑なものまであります。

## 簡単な歴史 ##

Autodesk は、1995 年に Netscape Navigation プラグイン WHIP の一部として DWF ファイル形式を導入しました。フォーマットは 2D のみのフォーマットから、時間の経過とともに 3D コンテンツを含むフォーマットに進化しました。多くのサードパーティ製アプリケーションもこの形式を利用しています。

## DWF ファイル形式 ##

DWF は、豊富なエンジニアリング設計データを共有するために特別に設計された、オープンで安全な形式です。その設計データの作成に使用された元のアプリケーション ソフトウェア、ハードウェア、およびオペレーティング システムとは無関係です。これにより、CAD アプリケーションを使用していないチーム メンバーが、建物、GIS、または製品設計を表示することでデジタル プロセスに参加できるようになります。 DWF ファイル アーカイブは、[ZIP](/compression/zip/)圧縮で作成された圧縮アーカイブにパッケージ化された複数の XML およびバイナリ ファイルで構成されます。 DWF ファイル拡張子の名前を ZIP に変更して、ファイルの内容を表示できます。 DWF パッケージには、2D グラフィックス、3D グラフィックス、パッケージおよびセクション メタデータ、その他のリソース ファイルなど、さまざまな種類の設計データを含めることができます。

**DWF メタデータ ファイル** – メタデータと構造 (作成者、タイトル、作成時間、セクションの依存関係、セクションの順序、リソース ファイルの説明、役割、MIME タイプなど) およびセクション (ページ情報、設計メタデータなど)。構造メタデータは、論理オブジェクト (パーツまたはページを表すファイルのコレクションなど) を作成するために使用されます。

**リソース ファイル** – パッケージ/セクション メタデータから参照されるメディアまたはその他のコンテンツ ファイルで、通常はさまざまな形式 (ZGL、W2D、[JPG](/image/jpeg/)、[PNG]) のデザイン データのプレゼンテーションです。 (/image/png/)、AVI、XML、[TXT](/word-processing/txt/)、[DOC](/word-processing/doc/)など)

### ファイル形式の詳細 ###

DWF ファイルは、以下に示すように 3 つの主要なセクションに編成されています。

* ファイル識別ヘッダー
* ファイルデータブロック
* ファイル終了予告編

#### ファイル識別子ヘッダー ####

ファイル ID ヘッダーにより、アプリケーションによる DWF ファイルの識別が可能になります。また、ファイルのエンコードに使用された DWF 仕様のバージョンも識別されます。これは、次のように配置された 12 バイトのヘッダーです。


|バイト|0|1|2|3|4|5|6|7|8|9|10|11
--- | --- |--- | --- |--- | --- |--- | --- |--- | --- |--- | --- |--- |
|文字|(|D|W|F|(スペース)|V|0|0|.|3|0|)

この表の要約は次のとおりです。

* ヘッダーの最初の 6 バイトは常に ASCII 文字「(DWF V」を表します
* 次の 5 バイトには、バージョン番号に関する情報が含まれています。

DWF ファイルを作成するアプリケーションは、データを適切に使用するために、リーダー アプリケーションがサポートする必要がある最小のバージョン番号を指定する必要があります。

#### ファイル データ ブロック ####

ファイル データ ブロックは、DWF ファイルの 13 番目のバイトから始まり、次の表に示すように、一連のオペコードとオペランドのペアです。

|フィールド 1|フィールド 2|フィールド 3|フィールド 4|フィールド 5|フィールド 5
--- | --- |--- | --- |--- | --- |
|オペコード|オペランド|オペコード|オペランド|オペコード|オペランド

DWF ファイルには、オペコードとオペランドのペアを読み取り可能な ASCII として、コード バイナリとして、またはこれらの両方の組み合わせとして含めることができます。すべての DWF 操作には読み取り可能な ASCII オペコード/オペランド形式があり、ほとんどの操作にはコード化されたバイナリ オペコード/オペランド形式もあります。オペコードは 1 バイトで、200 を超える操作が可能です。拡張 ASCII と拡張バイナリは例外的なケースです。オペコードの値は、いくつかの例外を除いて 0 ～ 255 の範囲です。拡張 ASCII と拡張バイナリの 2 つの特殊なオペコードを除いて、ファイル リーダーはオペランドの長さを計算する方法を知っている必要があります。

##### 禁止されたオペコード #####

以下の ASCII 表現はオペコードとして使用できません。

次の ASCII 表現はオペコードとして使用できません。

* スペース (0x20)
* タブ (0x09)
* ハイフン (0x2D)
* ASCII 数字 0 ～ 9 (0x30 ～ 0x39)
* キャリッジ リターン (0x0D)
※改行(0x0A)
* 一重引用符 (0x27)
※ダブルクォーテーション(0x22)
* ピリオド (0x2E)
* 括弧 (0x28 および 0x29)
* 中括弧 (0x7B および 0x7D)
* 角かっこ (0x5B および 0x5D)
* バックスラッシュ (0x5C)

#### ファイル終了予告編 ####

DWF のファイル終了トレーラーは、ファイルの終了を示す特別なオペコードです。一部のアプリケーションは、終了オペコードに続いて非 DWF データを保存できます。トレーラーは次のとおりです。


|バイト|0|1|2|3|4|5|6|7|8|9
---|---|---|---|---|---|---|---|---|---|---|
|文字|(|E|n|d|0|f|D|W|F|)

## 参照 ##

* [DWF - ウィキペディアによる](https://en.wikipedia.org/wiki/Design_Web_Format)
* [WHIP データ形式](http://paulbourke.net/dataformats/whip/)
* [https://learn.microsoft.com/en-us/archive/blogs/opc/adventures-in-packaging-episode-1](https://learn.microsoft.com/en-us/archive/blogs/opc/adventures-in-packaging-episode-1)

