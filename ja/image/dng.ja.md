{
  "date" : "2019-10-11",
  "keywords" :["dngファイル","dngファイル形式","dngファイルとは","ファイル","dng例","dngファイル拡張子","拡張子","形式"],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"DNG - デジタルカメラ画像ファイル形式",
  "description":"DNG ファイル形式と,DNG ファイルを作成して開くことができる API について学びます。",
  "linktitle" : "DNG",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## .DNG ファイルとは何ですか?

DNG は、RAW ファイルの保存に使用されるデジタル カメラの画像形式です。 2004 年 9 月に Adobe によって開発されました。基本的にはデジタル写真用に開発されました。 DNG は [TIFF](/image/tiff/)/EP 標準形式の拡張であり、メタデータを大幅に使用します。デジタル カメラからの生データを柔軟かつ芸術的にコントロールできるように操作するために、フォトグラファーは Camera Raw ファイルを選択します。 JPEG および TIFF 形式は、カメラによって処理された画像を保存するため、このような形式では変更の余地があまりありません。

## DNG ファイル形式の歴史とバージョン

これまでのところ、DNG 仕様には 5 つのバージョンがあります。バージョン 1.0.0.0 は、2004 年 9 月に「2.3」(ACR および DNG コンバーター) のリリースと共にリリースされました。 2005 年 2 月にバージョン 1.1.0.0 が公開されました。 2008 年 5 月にバージョン 1.2.0.0 がリリースされ、「4.4」で使用されました。バージョン 1.3.0.0 は 2009 年 6 月に公開されました。バージョン 1.4.0.0 は 2012 年に公開されました。

## DNG ファイル形式

Camera Raw ファイルは、センサーから直接、未処理または低処理のデータをキャプチャします。フィルムのネガに似ているため、Camera Raw 形式は「デジタル ネガ」とも呼ばれます。 RAW 形式の利点は、エンド ユーザーの芸術的なコントロールが向上することです。ユーザーは、ホワイトバランス、トーンマッピング、ノイズリダクション、シャープニングなどの要件に応じて、さまざまなパラメーター範囲を調整できます。一方、Camera Raw ファイルは、任意のソフトウェアまたはコンバーターを介して使用するために処理する必要があります。

そのため、Camera Raw ファイルに使用できる標準形式がなかったため、エンド ユーザーに複数の問題が生じていました。これらの問題は Adobe によって対処され、Camera Raw ファイルの非独占的な形式が定義されました。この形式は、デジタル ネガティブまたは DNG として知られています。 DNG は、RAW ファイルの処理用に幅広いハードウェアおよびソフトウェアで使用できます。さらに、DNG は、独自の RAW 形式を持つカメラで最初にキャプチャされた画像を保存するための中間形式としても使用できます。

### DNGファイル形式の仕様

このセクションでは、TIFF 6.0 の拡張としての DNG 形式について説明します。

* **ファイル拡張子**: DNG は「.DNG」または「.TIF」拡張子を使用します。
* **SubIFD ツリー**: DNG は SubIFD チェーンをサポートしていません。代わりに、TIFF-EP 仕様で言及されているように、DNG は SubIFD ツリーの使用を推奨しています。最高の品質と解像度では、0 の NewSubFileType を使用できますが、低品質のサムネイルでは、1 に等しい NewSubFileType を使用する必要があります。また、最初の IFD に低品質または低解像度のサムネイルを含める必要はありませんが、推奨されます。
* **バイト オーダー**: 特定のカメラ モデルのファイルについても、DNG リーダーでバイト オーダーがサポートされている必要があります。
* **マスクされたピクセル**: ほとんどのカメラ センサーは、黒のエンコードによってセンサーの端にある完全にマスクされたピクセルを計算します。これらのピクセルは、画像を DNG 形式で保存する前に、含めるかトリミングすることができます。マスクされたピクセルがトリミングされていない場合、これらのピクセルの領域を ActiveArea タグで指定する必要があります。これらのピクセルから収集された黒のエンコーディング レベルに関する情報は、生データを保存する前に使用するか、黒のレベルを指定する DNG ファイルに含めることができます。
* **欠陥ピクセル**: 生データを DNG として保存する前に、欠陥ピクセルを除外する必要があります。
* **メタデータ**: メタデータは、次のいずれかの方法で DNG に含めることができます。
** TIFF-EP または EXIF メタデータ タグを使用する
** IPTC メタデータ タグ (33723) を介して
** XMP メタデータ タグ (700) を使用
* **専有データ**: 通常、ベンダーは、独自のコンバーターで使用される未加工ファイルに専有データを含めます。 DNG は、独自のデータをプライベート タグ、プライベート IFD、およびプライベート MakerNote に保存します。ベンダーは、DNGPrivateData および MakerNoteSafety タグを使用して、DNG ファイルを編集するアプリケーションがこの独自のデータを保持していることを確認する必要があります。

以下は、いくつかの重要な制限と拡張 TIFF タグです。

**サンプルあたりのビット数**

8 ～ 32 ビット/サンプルがサポートされています。 SamplesPerPixel が 1 に等しくない場合、各サンプルの深度は同じでなければなりません。ただし、BitsPerSample が 8、16、または 32 に等しくない場合、TIFF のデフォルトの FillOrder 1 (ビッグエンディアン) を使用してビットをバイトにパックする必要があります。

**圧縮**

次の 2 つの圧縮タグ値がサポートされています。

* 値 # 1: 非圧縮データ。
* 値 # 7: JPEG 圧縮データ、ベースライン DCT JPEG またはロスレス JPEG 圧縮のいずれか。

**測光解釈**

次の値は、サムネイルとプレビュー IFD でのみサポートされています。

* 1 = BlackIsZero。ガンマ 2.2 色空間にあると想定されます。
※2＝RGB。 sRGB 色空間にあると想定されます。
* 6 = YCbCr。 JPEG でエンコードされたプレビュー イメージに使用されます。

raw IFD では次の値がサポートされており、カメラのネイティブ カラー スペースであると見なされます。

* 32803 # CFA (カラー フィルター アレイ)。
* 34892 # LinearRaw.

**オリエンテーション**

Orientation タグは、DNG ファイルのロスレス回転を実行できるように、ファイル ブラウザーに使用されます。 DNG リーダーは、ミラーリングされた向きを含め、考えられるすべての向きをサポートする必要があります。

## 最新バージョンの DNG の機能

DNG バージョン 1.4 2012 年 10 月には、次の高度な機能が含まれています。

* デフォルトのユーザークロップ
*透明度
* 浮動小数点 (HDR)
* 非可逆圧縮
* プロキシ

## 参照 ##

* [DNG 仕様 - Adobe による](https://www.kronometric.org/phot/processing/DNG/dng_spec_1.4.0.0.pdf)
* [デジタル ネガティブ - ウィキペディア](https://en.wikipedia.org/wiki/Digital_Negative)
* [DNG - デジタル カメラの RAW データのパブリック アーカイブ形式](https://helpx.adobe.com/photoshop/digital-negative.html)

