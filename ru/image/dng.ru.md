{
  "date" : "2019-10-11",
  "keywords" :[ "файл dng", "формат файла dng", "что такое файл dng", "файл", "пример dng", "расширение файла dng", "расширение", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"DNG — формат файла изображения цифровой камеры",
  "description":"Узнайте о формате файла DNG и API, которые могут создавать и открывать файлы DNG.",
  "linktitle" : "DNG",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## .DNG вариант №

DNG — это формат изображения цифровой камеры, используемый для хранения необработанных файлов. Он был разработан Adobe в сентябре 2004 года. Он был в основном разработан для цифровой фотографии. DNG является расширением стандартного формата [TIFF](/ru/image/tiff/)/EP и значительно использует метаданные. Чтобы манипулировать необработанными данными с цифровых камер с легкостью гибкости и художественного контроля, фотографы выбирают необработанные файлы камеры. В форматах JPEG и TIFF хранятся изображения, обработанные камерой, поэтому в таких форматах не так много места для переделки.

## История и версии формата файла DNG

На данный момент существует 5 версий спецификации DNG. Версия 1.0.0.0 была запущена в сентябре 2004 года вместе с выпуском «2.3» (конвертер ACR и DNG). В феврале 2005 года вышла версия 1.1.0.0. В мае 2008 года была выпущена версия 1.2.0.0, которая использовалась в «4.4». Версия 1.3.0.0 была опубликована в июне 2009 года. Версия 1.4.0.0 появилась в 2012 году.

## Формат файла DNG

В то время как необработанные файлы камеры захватывают необработанные или низкообработанные данные непосредственно с сенсора. Поскольку они похожи на пленочные негативы, форматы Camera Raw также известны как «цифровые негативы». Преимущество необработанных форматов заключается в расширении художественного контроля для конечного пользователя. Пользователь может настроить различные диапазоны параметров в соответствии с требованиями, такими как баланс белого, отображение тонов, шумоподавление, повышение резкости и так далее. С другой стороны, необработанный файл камеры должен быть обработан для любого использования с помощью любого программного обеспечения или конвертера.

Поскольку для необработанных файлов камеры не существовало стандартного формата, это создавало множество проблем для конечного пользователя. Эти проблемы были решены Adobe и определили непатентованный формат для необработанных файлов камеры. Формат известен как Digital Negative или DNG. DNG может использоваться широким спектром аппаратного и программного обеспечения для обработки необработанных файлов. Кроме того, DNG также можно использовать в качестве промежуточного формата для хранения изображений, которые были изначально сняты камерой, имеющей собственные собственные необработанные форматы.

### Спецификации формата файла DNG

В этом разделе мы опишем формат DNG как расширение TIFF 6.0.

* **Расширения файлов**: DNG использует расширения «.DNG» или «.TIF».
* **Деревья SubIFD**: DNG не поддерживает цепочки SubIFD, вместо этого DNG рекомендует использовать деревья SubIFD, как указано в спецификациях TIFF-EP. Для самого высокого качества и разрешения можно использовать NewSubFileType со значением 0, в то время как для эскизов с пониженным качеством следует использовать значение NewSubFileType, равное 1. Также рекомендуется, хотя и не обязательно, чтобы первый IFD имел миниатюру с низким качеством или разрешением.
* **Порядок байтов**: Порядок байтов должен поддерживаться программами чтения DNG, в том числе для файлов определенной модели камеры.
* **Маскированные пиксели**: большинство сенсоров камер вычисляют полностью маскированные пиксели на краю сенсора посредством кодирования черного цвета. Эти пиксели можно либо включить, либо обрезать перед сохранением изображения в формате DNG. Если маскируемые пиксели не обрезаются, то площадь этих пикселей должна быть указана в теге ActiveArea. Информация, собранная из этих пикселей об уровне кодирования черного, должна использоваться либо до сохранения необработанных данных, либо может быть включена в файл DNG с указанием уровня черного.
* **Дефектные пиксели**: перед сохранением необработанных данных в формате DNG необходимо исключить дефектные пиксели.
* **Метаданные**: метаданные могут быть включены в DNG любым из следующих способов:
** С помощью тегов метаданных TIFF-EP или EXIF.
** Через тег метаданных IPTC (33723)
** С использованием тега метаданных XMP (700)
* **Запатентованные данные**: обычно поставщики включают собственные данные в файл необработанных данных для использования их собственными конвертерами. DNG хранит свои проприетарные данные в частных тегах, частных IFD и в частном MakerNote. Поставщики должны использовать теги DNGPrivateData и MakerNoteSafety, чтобы убедиться, что приложения, редактирующие файлы DNG, сохраняют эти проприетарные данные.

Ниже приведены некоторые важные ограничения и расширения тегов TIFF.

**Бит на выборку**

Поддерживается от 8 до 32 бит/выборка. Для каждой выборки должна быть одинаковая глубина, если SamplesPerPixel не равен 1. Но если BitsPerSample не равен 8, 16 или 32, биты должны быть упакованы в байты с использованием FillOrder по умолчанию TIFF, равного 1 (прямой порядок байтов).

**Сжатие**

Поддерживаются два значения тега сжатия:

* Значение № 1: несжатые данные.
* Значение № 7: сжатые данные JPEG, либо базовый DCT JPEG, либо сжатие JPEG без потерь.

**Фотометрическая интерпретация**

Следующие значения поддерживаются только для эскизов и предварительных просмотров IFD:

* 1 = ЧерныйНоль. Предполагается, что в цветовом пространстве гамма 2.2.
* 2 = RGB. Предполагается, что в цветовом пространстве sRGB.
* 6 = YCbCr. Используется для изображений предварительного просмотра, закодированных в формате JPEG.

Следующие значения поддерживаются для необработанного IFD и считаются собственным цветовым пространством камеры:

*32803# CFA (массив цветных фильтров).
*34892#ЛинейноеRaw.

**Ориентация**

Тег ориентации используется для файловых браузеров, чтобы они могли выполнять вращение файлов DNG без потерь. Считыватели DNG должны поддерживать все возможные ориентации, включая зеркальные ориентации.

## Возможности последней версии DNG

Версия DNG 1.4, октябрь 2012 г., имеет следующие расширенные функции.

* Пользовательская обрезка по умолчанию
* Прозрачность
* Плавающая точка (HDR)
* Сжатие с потерями
* Прокси

## Использованная литература ##

* [Спецификации DNG — Adobe](https://www.kronometric.org/phot/processing/DNG/dng_spec_1.4.0.0.pdf)
* [Цифровой негатив — Википедия](https://en.wikipedia.org/wiki/Digital_Negative)
* [DNG — общедоступный архивный формат необработанных данных цифровых камер](https://helpx.adobe.com/photoshop/digital-negative.html)

