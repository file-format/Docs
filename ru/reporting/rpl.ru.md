{
  "date" : "2021-03-02",
  "author" : {
    "display_name" : "Muhammad Umar"
},
  "draft" : "false",
  "toc" : true,
  "title" :"RPL — макет страницы отчета",
  "keywords" :[ "rpl", "Макет страницы отчета", "XSD", "SQL Server", "отчетность"],
  "description":"Узнайте о формате потока RPL, который является внутренним двоичным форматом, используемым службами Microsoft SQL Server Reporting Services при взаимодействии с элементами управления средства просмотра.",
  "linktitle" : "RPL",
  "menu" : {
    "docs" : {
      "parent" : "reporting"
}
},
  "lastmod" : "2021-03-02"
}

## .RPL вариант № ##

Формат потока RPL (макет страницы отчета) — это внутренний двоичный формат, используемый службами MS SQL Server Reporting Services при контакте с элементами управления средством просмотра, чтобы сократить часть работы по рендерингу с сервера на элемент управления клиентского средства просмотра. Разработчики могут создавать собственные дизайнеры отчетов с помощью RPL, которые будут генерировать RPL, а также настраиваемые средства визуализации отчетов, которые обрабатывают и отображают файл RPL для отображения отчетов.

## Структуры РПЛ

Поток RPL включает в себя структуру потока, структуру отчета, свойства отчета и перечисления. Каждая структура включает в себя следующее:

- Определение структуры.

- Грамматика расширенной формы Бэкуса-Наура (ABNF) для структуры.

- Битовая диаграмма структуры.

- Определения всех полей, содержащихся в структуре.

Вот краткие примечания о некоторых структурах RPL:

### Структура потока
Структура потока состоит из серии записей. Запись содержит ноль или более структурированных полей, содержащих макет отчета.

#### РПЛ Стрим
Поток RPL должен иметь только одну запись отчета, а поток должен представлять собой серию двоичных записей, сохраняющих иерархию отчета.

#### Записывать
Запись — это основной строительный блок, используемый для хранения информации об отчете. Запись состоит из последовательности байтов переменной длины. Запись состоит из двух компонентов:
- Тип записи
- Данные записи, характерные для этого типа записи.
Тип записи — это один байт, который определяет, какой тип информации указан в записи и как упорядочена и структурирована структура данных записи, относящихся к записи. Значение записи зависит от типа данных, относящихся к этой записи.

#### Структуры простых типов данных

В следующей таблице определены типы данных в потоке RPL.

|Описание| формат|
---|---|
|Char|Представляет 16-битное (2-байтовое) числовое (порядковое) значение.|
|Byte|Представляет собой 8-битное (1-байтовое) целое число без знака.|
|Int16|Представляет 16-битное (2-байтовое) целое число со знаком.|
|Single|Представляет 32-битное (4-байтовое) значение с плавающей запятой одинарной точности.|
|Decimal|Представляет 128-битный (16-байтовый) тип данных.|
|DateTime|Представляет 64-битную (8-байтовую) кодировку значения даты и времени.|
|Int64|Представляет 64-разрядное (8-байтовое) целое число со знаком.|
|Int32|Представляет 32-битное (4-байтовое) целое число со знаком.|
|Float|Представляет 32-битное (4-байтовое) значение с плавающей запятой одинарной точности.|
|Boolean|Представляет 8-битное (1-байтовое) значение логического логического типа. Допустимые значения: истина (1) и ложь (0).|
|Long|Представляет 64-разрядное (8-байтовое) целое число со знаком.|
|String|Все строковые значения в протоколе ДОЛЖНЫ быть UNICODE UTF-16. По умолчанию все значения String начинаются с целого числа, определяющего длину строки. Строковые значения представлены в протоколе в виде массива байтов; количество байтов ДОЛЖНО быть равно количеству символов в строке, умноженному на два. |

### Структуры отчетов
Структуры отчетов включают определения и размеры соответствующих структур и элементов.

В следующем списке указаны структуры отчета:

- Отчет
- Версия
- Свойства отчета
- Элемент массива смещения
- Содержание страницы
- Страница
- Свойства страницы
- Макет страницы
- Раздел
- Простой раздел
- Смешанная секция
- Свойства раздела
- Элемент области тела
- Элемент заголовка страницы
- Элемент нижнего колонтитула страницы
- Элемент тела
- Свойства элемента
- Общие свойства элемента
- Использовать общие свойства элемента
- InlineSharedElementProperties
- NonSharedElementProperties
- Стиль
- Общие свойства стиля
- NonSharedStyleProperties
- Информация о действиях
- ActionInfoContent
- Действие
- ActionImageMapAreas
- ActionInfoWithMaps
- Динамические данные изображения
- ImageConsolidationOffsets
- Сообщить об элементе
- Линия
- Изображение
- ImageDataProperties
- UseSharedImageDataProperties
- InlineSharedImageDataProperties
- NonSharedImageDataProperties
- Данные изображения
- ImageMapAreas
- ImageMapArea
- Диаграмма
- Панель приборов
- Карта
- Прямоугольник
- Подотчет
- RichTextBox
- ПараграфКонтент
- TextRun
- Параграф
- RichTextBoxСтруктура
- Табликс
- ТабликсКонтент
- Структура Табликса
- ТабликсИзмерения
- Ширина столбцов
- Информация о столбце
- RowHeights
- Информация о строке
- ТабликсРоу
- ТабликсРовСелл
- ТабликсКорнер
- Заголовок ТабликсКолонки
- TablixRowHeader
- Табликсбодировселлс
- ТабликсБодиРов
- Табликсбодицелл
- ТабликсРовМемберсДеф
- Табликсколмемберсдеф
- TablixMemberDef
- Измерения
- Измерение
- ОтчетЭлементЭнд

### Характеристики
Ниже приведен список свойств, которые можно использовать в потоке RPL:

- Я БЫ
- Количество столбцов
- Расстояние между столбцами
- Уникальное имя
- Имя
- Этикетка
- Закладка
- Подсказка
- Переключить элемент
- Описание
- Расположение
- ConsumeContainerWhiteSpace (RPL 10.6)
- Язык
- Время исполнения
- Автор
- Автообновление
- ИмяОтчета
- Высота страницы
- Ширина страницы
- МаржаВерх
- MarginLeft
- MarginRight
- МаржаНиз
- Столбцы
- Имя страницы (RPL 10.6)
- наклон
- Может расти
- МожетСжать
- Ценность
- Состояние переключения
- Можно сортировать
- Состояние сортировки
- Формула
- IsToggleParent
- Код Типа
- Исходное значение
- Просто
- Смещение содержимого
- ИмяПотока
- Калибровка
- LinkToChild
- Печать на первой странице
- Печать между разделами (RPL 10.4)
- FormattedValueExpressionBased
- Обработано с ошибкой
- Тип изображения MIME
-ИмяИзображения
- Ширина
- Высота
- Горизонтальное разрешение
- Вертикальное разрешение
- Необработанный формат
- Гиперссылка
- ЗакладкаСсылка
- Идентификатор детализации
- URL-адрес детализации
- Цвет границы
- ГраницаЦветЛевая
- ГраницаЦветПравая
- ГраницаЦветВерх
- ГраницаЦветБоттом
- стиль границы
- BorderStyleLeft
- BorderStyleRight
- BorderStyleTop
- BorderStyleBottom
- Ширина рамки
- Ширина границы влево
- ГраницаШиринаПравая
- Ширина Верхней границы
- ГраницаШиринаБоттом
- PaddingLeft
- PaddingRight
- ПаддингВерх
- PaddingBottom
- Стиль шрифта
- Семейство шрифтов
- Размер шрифта
- Вес шрифта
- Формат
- Оформление текста
- Выравнивание текста
- Вертикальное выравнивание
- Цвет
- Высота линии
- Направление
- Режим записи
- ЮникодБиДи
- Фоновая картинка
- Фоновый цвет
- ФонПовторить
- Цифровой язык
- Цифровой Вариант
- Календарь
- СтолбецЗаголовокРовс
- Столбцы Заголовка Строки
- ColsBeforeRowHeader
- Направление макета
- Путь к определению
- Уровень
- индекс ячейки члена
- CellItemOffset
- КолСпан
- Ровспен
- DefIndex
- Индекс столбца
- Индекс строки
- Метка группы
- РекурсивныйToggleLevel
- Стиль списка
- Уровень списка
- номер абзаца
- Правый отступ
- Отступ слева
- Висячий отступ
- SpaceBefore
- Пробел после
- Первая строка
- Разметка
- ContentTop
- ContentLeft
- Ширина содержимого
- Высота содержимого
- Состояние
- CellItemState
- MemberDefState

### Перечисления
В следующем списке показаны перечисления, которые можно использовать в потоке RPL:

- Параметры сортировки
- Размеры
- Тип фигуры
- ImageRawFormat
-Стили шрифтов
- Веса шрифтов
- Текстовые украшения
- Выравнивание текста
- Вертикальные выравнивания
- Направления
- Режимы письма
- UnicodeBiDiTypes
- Календари
- Стили границ
- ФонПовторные Типы
- стили списка
- Стили разметки
- Код Типа
- Государственные значения
- Табликсмемберстатевалуес
- Табликсмембердефстатевалуес
- RPLРазмер





## Использованная литература ##

- [Формат двоичного потока макета страницы отчета (RPL)](https://learn.microsoft.com/en-us/openspecs/sql_server_protocols/ms-rpl/9c4ff7ba-f6da-4092-9670-aa0e54e73887)

