{
  "date" : "2020-11-11",
  "keywords" :[ "LDF", "расширение", "файл", "формат файла", "Тип файла базы данных", "Формат файла базы данных", "Файлы базы данных" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Узнайте о формате файла LDF и API-интерфейсах, которые могут создавать и открывать файлы LDF.",
  "title" :"LDF — формат файла основной базы данных SQL Server",
  "linktitle" : "LDF",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
},
  "lastmod" : "2020-08-12"
}

## .LDF вариант №

Файл с расширением .ldf представляет собой файл журнала, поддерживаемый Microsoft SQL Server, который представляет собой систему управления реляционными базами данных (RDBMS). Все транзакции, выполняемые с файлами первичной базы данных ([MDF](/ru/database/mdf/)) (такие как вставка, обновление, удаление), записываются в файл LDF. Файлы LDF являются важными компонентами любой базы данных. В случае сбоя системы файл журнала используется для восстановления базы данных до согласованного состояния. Файл журнала транзакций может увеличиться в размере, если транзакции не полностью зафиксированы. Файлы LDF можно открыть с помощью программного приложения Microsoft SQL Server.

## Операции, записанные в файл LDF

Файл журнала SQL записывает следующие операции:

* Начало и конец каждой транзакции.

* Каждое изменение данных данных (вставка, обновление или удаление). Сюда также входят изменения, внесенные системными хранимыми процедурами или операторами языка определения данных (DDL) в любую таблицу, включая системные таблицы.

* Каждый объем и распределение страниц или освобождение.

* Создание или удаление таблицы или индекса.

## Формат файла LDF

Файл LDF состоит из записей транзакций SQL Server, организованных в виде строки записей журнала. Каждая запись журнала имеет порядковый номер журнала (LSN), который выше, чем LSN предыдущей записи. Строки объединяются друг за другом в файле. Благодаря современным высокоскоростным компьютерам записи могут быть вставлены там, где LSN2 существует в файле журнала до LSN1. Поскольку операции записываются последовательно, изменение, описанное LSN2, было выполнено после записи журнала LSN1. Записи для конкретной транзакции связываются в обратном порядке с помощью указателей, которые используются и ускоряют откат транзакции.
 

## использованная литература

* [Файлы базы данных и файловые группы](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroups?view=sql-server-ver15)
* [Руководство по архитектуре журнала транзакций и управлению им](https://learn.microsoft.com/en-us/sql/relational-databases/sql-server-transaction-log-architecture-and-management-guide?view=sql- сервер-ver15)

