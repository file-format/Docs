{
  "date" : "2019-10-11",
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"Формат файла WMV",
  "description":"Узнайте о формате файла WMV и API-интерфейсах, которые могут создавать и открывать файлы WMV.",
  "linktitle" : "WMV",
  "menu" : {
    "docs" : {
      "parent" : "video"
}
},
  "lastmod" : "2019-09-16"
}

## .WMV вариант №

Advanced Systems Format (ASF) — это цифровой мультимедийный контейнер, предназначенный в первую очередь для хранения и передачи медиапотоков. Microsoft Windows Media Video (WMV) — это сжатый видеоформат, а Microsoft Windows Media Audio (WMA) — это сжатый аудиоформат вместе с дополнительными метаданными в контейнере ASF, разработанном Microsoft. Когда файлы WMV или WMA закодированы с помощью кодеков Windows Media Video и Windows Media Audio, они представляются с расширением .asf. WMV сжимает большие файлы для лучшей скорости передачи по сети, сохраняя при этом качество видео. WMV специально разработан для работы на всех устройствах Windows. После стандартизации Обществом инженеров кино и телевидения (SMPTE) WMV теперь считается форматом открытого стандарта.

## История ##

С помощью проприетарных кодеков Microsoft в 1999 году был разработан новый сжатый формат видео, известный как WMV7, который был основан на MPEG-4 Part 2. Улучшения были добавлены в следующие две версии, т.е. WMV8 и 9. Microsoft представила 9^^th^^ версию. из WMV в SMPTE для стандартизации в 2003 году, который в конечном итоге был стандартизирован в 2006 году как SMPTE 421M, также известный как VC-1. Идея WMV заключалась в разработке формата мультимедиа, который мог бы поддерживаться всем аппаратным и программным обеспечением, поддерживаемым Microsoft. Кроме того, еще одной важной целью была передача видеопотоков через Интернет в оптимальном сценарии. После стандартизации SMPTE WMV также стал видеоформатом для дисков Blu-ray.

## Спецификации формата файла

### Контейнер

Как правило, WMV упакован в контейнер ASF, но, кроме того, контейнер Matroska или AVI также может поддерживать его с расширениями .mkv и .avi соответственно.

### Видео Windows Media 9

Несмотря на то, что в серии Windows Media Video 9 доступны различные аудио- и видеокодеки для создания и воспроизведения цифровых медиафайлов, кодек WMV-9 является новейшим и лучшим видеокодеком, поскольку он обеспечивает оптимальное сжатие при очень низких скоростях передачи данных, т. е. 160x. 120 при 10 Кбит/с до 1920 x 1080 при 4–8 Мбит/с для различных HD-видео.

### Структура кодека

WMV-9 имеет 8-битный внутренний цветовой формат 4:2:0. Как и все другие популярные стандарты сжатия видео MPEG-1 и H.261, WMV-9 использует блочную схему компенсации движения и пространственного преобразования. В целом можно сказать, что эти стандарты выполняют поблочную компенсацию движения из предыдущего реконструированного кадра с помощью двумерной величины, называемой вектором движения (MV), чтобы сигнализировать о пространственном смещении. Текущий блок формируется с помощью предсказания значений из предыдущего реконструированного кадра такого же размера, смещенного от текущей позиции на вектор движения. В конце концов, остаточная ошибка вычисляется как разница между предсказанным блоком с компенсацией движения и фактическим блоком. Эта остаточная ошибка преобразуется с использованием линейного преобразования с уплотнением энергии, затем квантуется и кодируется по энтропии.

Квантованные коэффициенты преобразования подвергаются энтропийному декодированию, обратному квантованию и обратному преобразованию для получения аппроксимации остаточной ошибки на стороне декодера, которая затем добавляется к предсказанию с компенсацией движения для создания реконструкции. Высокоуровневое описание кодека показано на следующем изображении.

В оставшейся части раздела будут обсуждаться новые улучшения в WMV-9, которые отличают его от остальных решений для кодирования видео, таких как стандарты MPEG. WMV-9 имеет внутренние (I), прогнозируемые (P) и двунаправленно прогнозируемые (B) кадры. Внутренние кадры — это те, которые кодируются независимо и не зависят от других кадров. Прогнозируемые кадры — это кадры, которые зависят от одного кадра в прошлом. Декодирование прогнозируемого кадра может происходить только после декодирования всех опорных кадров, предшествующих текущему кадру, начиная с самого последнего (I) кадра. B-кадры — это кадры, которые имеют две ссылки — одну во временном прошлом и одну во временном будущем. B-кадры передаются после их ссылок, что означает, что B-кадры отправляются не по порядку, чтобы обеспечить доступность их ссылок во время декодирования. Кадры B в WMV-9 не используются в качестве эталона для последующих кадров. Это помещает B-кадры вне цикла декодирования, позволяя сократить время декодирования B-кадров без дрейфа или долговременных визуальных артефактов. Приведенное выше определение кадров I, P и B справедливо как для прогрессивной, так и для чересстрочной последовательностей.

Производительность видеокодеков сравнивается с их графиком скорости искажения (RD). Это двумерная кривая, показывающая искажение, вызванное сжатием при определенном битрейте.

WMV-9 решил эту проблему, представив ряд методов, перечисленных ниже:

1. Адаптивное преобразование размера блока

2. Набор преобразований с ограниченной точностью

3. Компенсация движения

4. Квантование и деквантование

5. Расширенное энтропийное кодирование

6. Циклическая фильтрация

7. Усовершенствованное кодирование B-кадров

8. Чересстрочное кодирование

9. Сглаживание перекрытий

10. Низкочастотные инструменты

11. Компенсация затухания

## Использованная литература ##

* [https://bytescout.com/blog/2014/10/windows-media-video-format.html](https://bytescout.com/blog/2014/10/windows-media-video-format.html )
* [https://en.wikipedia.org/wiki/Windows_Media_Video](https://en.wikipedia.org/wiki/Windows_Media_Video)


