{
  "date" : "2020-03-16",
  "keywords" :[ "DWF", "Формат файла", "Открыть", "Чтение", "Создать", "CAD" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Узнайте о формате файла DWF и API-интерфейсах, с помощью которых можно создавать и открывать файлы DWF.",
  "title" :"Формат файла DWF",
  "linktitle" : "DWF",
  "menu" : {
    "docs" : {
      "parent" : "cad"
}
},
  "lastmod" : "2019-09-10"
}

## .DWF вариант №

Design Web Format (DWF) представляет собой 2D/3D-чертеж в сжатом формате для просмотра, просмотра или печати файлов проекта. Он содержит графику и текст как часть проектных данных и уменьшает размер файла из-за его сжатого формата. Уменьшенный размер файла делает распространение и передачу обширных проектных данных эффективными. DWF не требует, чтобы получатель знал об использовании программного обеспечения САПР, в котором был создан исходный чертеж. Содержимое файла формата DWF может быть простым и включать только один лист или достаточно сложным, чтобы иметь шрифты, цвет и изображения.

## Краткая история ##

Autodesk представила формат файла DWF в 1995 году как часть подключаемого модуля Netscape Navigation, WHIP. Со временем формат превратился из формата только 2D в 3D-контент. Многие сторонние приложения также используют этот формат.

## Формат файла DWF ##

DWF — это открытый безопасный формат, разработанный специально для обмена обширными проектными данными. Он не зависит от исходного прикладного программного обеспечения, аппаратного обеспечения и операционной системы, используемых для создания этих проектных данных. Это позволяет членам команды, которые не используют приложения САПР, участвовать в цифровых процессах, просматривая проекты зданий, ГИС или продуктов. Файловый архив DWF состоит из нескольких файлов XML и двоичных файлов, упакованных вместе в сжатый архив, созданный с помощью сжатия [ZIP](/ru/compression/zip/). Вы можете переименовать расширение файла DWF в ZIP и просмотреть содержимое файла. Пакет DWF может содержать множество типов проектных данных, таких как 2D-графика, 3D-графика, метаданные пакета и раздела и другие файлы ресурсов.

**Файлы метаданных DWF** — XML-файлы, содержащие информацию, относящуюся к метаданным и структуре (автор, название, время создания, зависимости разделов, порядок разделов, описания файлов ресурсов, роли, MIME-типы и т. д.) и относящиеся к разделу (страница информация, проектные метаданные и т. д.). Структурные метаданные используются для создания логических объектов (наборов файлов для представления части или страницы и т. д.).

**Исходные файлы** — мультимедийные или другие файлы содержимого, на которые ссылаются метаданные пакета/раздела и которые обычно представляют собой презентации проектных данных в различных форматах (ZGL, W2D, [JPG](/ru/image/jpeg/), [PNG](/ru/image/png/), AVI, XML, [TXT](/ru/word-processing/txt/), [DOC](/ru/word-processing/doc/) и т. д.)

### Сведения о формате файла ###

Файлы DWF организованы в три основных раздела, как показано ниже.

* Заголовок идентификации файла
* Блок данных файла
* Трейлер окончания файла

#### Заголовок идентификатора файла ####

Заголовок идентификатора файла позволяет приложениям идентифицировать файлы DWF. Он также определяет, какая версия спецификаций DWF использовалась для кодирования файла. Это 12-байтовый заголовок, который устроен следующим образом:


|Байт|0|1|2|3|4|5|6|7|8|9|10|11
--- | --- |--- | --- |--- | --- |--- | --- |--- | --- |--- | --- |--- |
|Символ|(|D|W|F|(пробел)|V|0|0|.|3|0|)

Вот краткое изложение этой таблицы:

* Первые шесть байтов заголовка всегда представляют символы ASCII "(DWF V"
* Следующие 5 байтов содержат информацию о номере версии, например, «00.30» со значением основной и дополнительной версий формата.

Приложения, создающие файл DWF, должны указывать наименьший возможный номер версии, который должен поддерживать приложение для чтения, чтобы правильно использовать данные.

#### Блок данных файла ####

Блок данных файла начинается с 13-го байта файла DWF и представляет собой серию пар кода операции и операнда, как показано в следующей таблице.

|Поле 1|Поле 2|Поле 3|Поле 4|Поле 5|Поле 5
--- | --- |--- | --- |--- | --- |
|код операции|операнд|код операции|операнд|код операции|операнд

Файл DWF может содержать пары код операции-операнд в виде читаемого ASCII, а также двоичного кода или их комбинации. Все операции DWF имеют удобочитаемую форму кода операции/операнда ASCII, а большинство операций также имеют закодированную двоичную форму кода операции/операнда. Коды операций находятся в одном байте, что позволяет выполнять более 200 операций. Расширенный ASCII и расширенный двоичный код являются исключительными случаями. Значения кодов операций могут варьироваться от 0 до 255 с некоторыми исключениями. За исключением двух специальных типов кодов операций, расширенного ASCII и расширенного двоичного кода, программа чтения файлов должна знать, как вычислить длину операнда.

##### Запрещенные коды операций #####

Представления ASCII для следующего не могут использоваться в качестве кодов операций:

Следующие представления ASCII не могут использоваться в качестве кодов операций:

* Пробел (0x20)
* Вкладка (0x09)
* Дефис (0x2D)
* Цифры ASCII 0-9 (0x30 - 0x39)
* Возврат каретки (0x0D)
* Перевод строки (0x0A)
* Одинарная кавычка (0x27)
* Двойная кавычка (0x22)
* Период (0x2E)
* Круглые скобки (0x28 и 0x29)
* Фигурные скобки (0x7B и 0x7D)
* Квадратные скобки (0x5B и 0x5D)
* Обратная косая черта (0x5C)

#### Трейлер завершения файла ####

Трейлер завершения файла для DWF — это просто специальный код операции, указывающий на конец файла. Некоторые приложения могут сохранять данные, отличные от DWF, после кода операции завершения. Трейлер показан ниже:


|байт|0|1|2|3|4|5|6|7|8|9
---|---|---|---|---|---|---|---|---|---|---|
|Символ|(|E|n|d|0|f|D|W|F|)

## Использованная литература ##

* [DWF — Википедия](https://en.wikipedia.org/wiki/Design_Web_Format)
* [Формат данных WHIP](http://paulbourke.net/dataformats/whip/)
* [https://learn.microsoft.com/en-us/archive/blogs/opc/adventures-in-packaging-episode-1](https://learn.microsoft.com/en-us/archive/blogs/opc/adventures-in-packaging-episode-1)

