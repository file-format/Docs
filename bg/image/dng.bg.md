{
  "date" : "2019-10-11",
  "keywords" :[ "dng файл", "dng файлов формат", "какво е dng файл", "файл", "dng пример", "dng файлово разширение", "разширение", "формат" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"DNG – файлов формат за изображения на цифрова камера",
  "description":"Научете за файловия формат DNG и API, които могат да създават и отварят DNG файлове.",
  "linktitle" : "DNG",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2019-09-10"
}

## Какво е DNG файл?

DNG е формат за изображение на цифрова камера, използван за съхранение на необработени файлове. Разработен е от Adobe през септември 2004 г. Основно е разработен за цифрова фотография. DNG е разширение на [TIFF](/bg/image/tiff/)/EP стандартен формат и използва значително метаданни. За да манипулират необработени данни от цифрови фотоапарати с лекотата на гъвкавост и артистичен контрол, фотографите избират необработени файлове на камерата. Форматите JPEG и TIFF съхраняват изображения, които се обработват от камерата, следователно в такива формати няма много място за промяна.

## История и версии на DNG файлов формат

Досега е имало 5 версии на DNG спецификацията. Версия 1.0.0.0 стартира през септември 2004 г. заедно с пускането на "2.3" (ACR и DNG конвертор). През февруари 2005 г. беше публикувана версия 1.1.0.0. През май 2008 г. версия 1.2.0.0 беше пусната и беше използвана в "4.4". Версия 1.3.0.0 беше публикувана през юни 2009 г. Версия 1.4.0.0 се появи през 2012 г.

## DNG файлов формат

Докато необработените файлове на камерата улавят необработени или слабо обработени данни директно от сензора. Тъй като са подобни на филмовите негативи, необработените формати на камерата са известни също като „цифрови негативи“. Предимството на необработените формати е увеличеният артистичен контрол за крайния потребител. Потребителят може да регулира различни диапазони на параметри според изискванията, като баланс на бялото, тонално картографиране, намаляване на шума, изостряне и т.н. От друга страна необработеният файл на камерата трябва да бъде обработен за каквато и да е употреба чрез произволен софтуер или чрез конвертор.

Тъй като нямаше наличен стандартен формат за необработените файлове на камерата, това създаде множество проблеми за крайния потребител. Тези проблеми бяха адресирани от Adobe и дефинира непатентован формат за необработени файлове на камерата. Форматът е известен като цифров негатив или DNG. DNG може да се използва от широк набор от хардуер и софтуер за обработка на необработени файлове. Освен това, DNG може да се използва и като междинен формат за съхраняване на изображения, които са били заснети първоначално от фотоапарат, който има свои собствени необработени формати.

### Спецификации на DNG файлов формат

В този раздел ще опишем DNG формата като разширение на TIFF 6.0.

* **Разширения на файлове**: DNG използва разширения „.DNG“ или „.TIF“.
* **SubIFD дървета**: DNG не поддържа SubIFD вериги, вместо това DNG препоръчва използването на SubIFD дървета, както е посочено в спецификациите на TIFF-EP. Най-високото качество и разделителна способност може да използват NewSubFileType от 0, докато миниатюрите с намалено качество трябва да използват NewSubFileType, равно на 1. Също така се препоръчва, макар и не задължително, първият IFD да има миниатюра с ниско качество или разделителна способност.
* **Ред на байтовете**: Редът на байтовете трябва да се поддържа от DNG четци, също и за файлове от определен модел камера.
* **Маскирани пиксели**: Повечето сензори на камерата изчисляват напълно маскирани пиксели на ръба на сензора чрез черно кодиране. Тези пиксели могат да бъдат включени или изрязани, преди изображението да бъде съхранено във формат DNG. Ако маскираните пиксели не са изрязани, площта на тези пиксели трябва да бъде спомената в маркера ActiveArea. Информацията, събрана от тези пиксели относно нивото на кодиране на черното, трябва да се използва или преди да се съхранят необработените данни, или може да бъде включена в DNG файл, указващ нивото на черното.
* **Дефектни пиксели**: Преди да съхраните необработените данни като DNG, трябва да се изключат дефектните пиксели.
* **Метаданни**: Метаданните могат да бъдат включени в DNG по някой от следните начини:
** Чрез използване на тагове за метаданни TIFF-EP или EXIF
** Чрез маркера за метаданни на IPTC (33723)
** Използване на маркера за метаданни XMP (700)
* **Собствени данни**: Обикновено доставчиците включват собствени данни в необработен файл, който да се използва от техните собствени конвертори. DNG съхранява своите собствени данни в частни тагове, частни IFD и в частен MakerNote. Доставчиците трябва да използват таговете DNGPrivateData и MakerNoteSafety, за да се уверят, че приложенията, които редактират DNG файлове, запазват тези собствени данни.

Следват някои важни ограничения и разширения на TIFF тагове.

**BitsPerSample**

Поддържат се 8 до 32 бита/извадка. Трябва да има еднаква дълбочина за всяка проба, когато SamplesPerPixel не е равно на 1. Но ако BitsPerSample не е равно на 8 или 16 или 32, тогава битовете трябва да бъдат опаковани в байтове, като се използва TIFF FillOrder по подразбиране от 1 (big-endian).

**Компресия**

Поддържат се две стойности на етикета за компресия:

* Стойност # 1: Некомпресирани данни.
* Стойност # 7: JPEG компресирани данни, или базов DCT JPEG, или JPEG компресия без загуби.

**Фотометрична интерпретация**

Следните стойности се поддържат само за миниатюри и IFD за визуализация:

* 1 = Черното е нула. Предполага се, че е в цветово пространство гама 2.2.
* 2 = RGB. Предполага се, че е в цветовото пространство sRGB.
* 6 = YCbCr. Използва се за JPEG кодирани изображения за преглед.

Следните стойности се поддържат за необработения IFD и се предполага, че са естественото цветово пространство на камерата:

* 32803 # CFA (масив с цветен филтър).
* 34892 # LinearRaw.

**Ориентация**

Маркерът за ориентация се използва за файлови браузъри, така че да могат да извършват ротация без загуба на DNG файлове. DNG четците трябва да поддържат всички възможни ориентации, включително огледални ориентации.

## Функции в последната версия на DNG

DNG версия 1.4 октомври 2012 г. има следните разширени функции.

* Потребителско изрязване по подразбиране
* Прозрачност
* Плаваща запетая (HDR)
* Компресия със загуба
* Проксита

## Препратки ##

* [DNG спецификации – от Adobe](https://www.kronometric.org/phot/processing/DNG/dng_spec_1.4.0.0.pdf)
* [Цифров негатив - Уикипедия](https://en.wikipedia.org/wiki/Digital_Negative)
* [DNG – публичният архивен формат за необработени данни от цифрова камера](https://helpx.adobe.com/photoshop/digital-negative.html)

