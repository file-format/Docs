{
  "date" : "2021-06-29",
  "keywords" :["ICNS", "разширение", "файл", "формат", "изображение", "Изображение на икона на Apple", "macOS", "Apple", "Икона" ],
  "author" : {
    "display_name" : "Sami Cheema"
},
  "draft" : "false",
  "toc" : true,
  "title" :"ICNS – изображение на икона на Apple",
  "description":"Научете за ICNS файловия формат и API, които могат да създават и отварят ICNS файлове.",
  "linktitle" : "ICNS",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2021-06-29"
}

## Какво е ICNS файл? ##

Формат на икона, използван от програми на macOS, се нарича ICNS файл. Позволява 1-битови и 8-битови алфа ленти и записва една или повече картини, обикновено направени от [PNG](/bg/image/png/) документи. Иконата на програмата в браузъра и интерфейса на macOS се показва с помощта на ICNS файлове.

Въз основа на местоположението, една и съща стилна икона може да има множество настройки. Форматът ICNS е претърпял множество промени и се е развил до точката, в която вече може да се използва като основа за различни съвместими формати. Ето някои други важни точки, които трябва да знаете:

* Ресурс за семейство икони, икона за Macintosh, икона за Macintosh OS X, икона за Mac OS, икона на Apple, ресурс за икони на Mac OS X и ресурс за икони на Mac OS са някои от другите имена.
* За информация за икони се използва източник в ресурсния клон.
* В повечето случаи файлът съдържа множество изображения. 1612 квадратни пиксела и 1024, 512, 256, 128, 48, 32 и 16 квадратни пиксела са поддържани размери на картината.


## ICNS файлов формат ##

Форматът на данните ICNS е капсула за едно или повече изображения, поддържаща 1-битови ленти и множество състояния на изображението.
Операционната система може да промени размера на изображенията на иконите, за да пасне на необходимия размер на дисплея. Снимките с по-големи икони обикновено се записват като [JPEG](/bg/image/jpeg/) 2000 или [PNG](/bg/image/png/) файлове. Възможен е тип както компресирани, така и некомпресирани ICNS файлове.

Данните за заглавка и двоична икона съставляват структурата на ICNS файл. Заглавката съдържа 8 байта данни, четири от които са магическият литерал и четири от които са дължината на файла. Типът и размерът на всяка картина на икона се съхраняват в секцията с данни за иконата, която е последвана от данните за двоично изображение. Размерът на картината определя размера на двоичната секция.

## Техническа спецификация ##

### Заглавие ###

|Офсет|Размер|Цел
---|---|---|
|0|4|Магически литерал, трябва да бъде "icns" (0x69, 0x63, 0x6e, 0x73)
|4|4|Дължина на файла, в байтове, първо msb


### Данни за икона ###

|Офсет|Размер|Цел
---|---|---|
|0|4|Тип икона
|4|4|Дължина на данните, в байтове (включително тип и дължина), msb първо
|8|Променлива|Данни за икона

### Компресия ###

Пикселните данни са компресирани до известна степен. 32-битовите ("is32", "il32", "ih32", "it32") и ARGB ("ic04", "ic05") пиксели често се компресират (на канал) по начин, подобен на PackBits.

|Водеща стойност|Последни байтове|Резултат (некомпресиран)
---|---|---|
|0 - 127|1 - 128|1 - 128 байта
|128 - 255|1 байт|3 - 130 копия

## Референция ##

* [ICNS - Wikipedia](https://en.wikipedia.org/wiki/Apple_Icon_Image_format)

