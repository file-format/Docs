{
  "date" : "2020-11-11",
  "keywords" :[ "LDF", "разширение", "файл", "файлов формат", "Тип файл на база данни", "Файлов формат на база данни", "Файлове на база данни"],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Научете за файловия формат LDF и API, които могат да създават и отварят LDF файлове.",
  "title" :"LDF – SQL Server Master Database File Format",
  "linktitle" : "LDF",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
},
  "lastmod" : "2020-08-12"
}

## Какво е LDF файл?

Файл с разширение .ldf е лог файл, поддържан от Microsoft SQL Server, който е система за управление на релационна база данни (RDBMS). Всички транзакции, извършени върху първични файлове на база данни ([MDF](/bg/database/mdf/)) (като вмъкване, актуализиране, изтриване) се записват в LDF файла. LDF файловете са критични компоненти на всяка база данни. В случай на повреда на системата, регистрационният файл се използва за възстановяване на базата данни до съвместимо състояние. Регистрационният файл на транзакциите може да се увеличи по размер, ако транзакциите не са напълно ангажирани. LDF файловете могат да се отварят със софтуерното приложение Microsoft SQL Server.

## Операции, записани в LDF файл

SQL регистрационен файл записва следните операции:

* Начало и край на всяка транзакция.

* Всяка промяна на данни (вмъкване, актуализиране или изтриване). Това също включва промени от системни съхранени процедури или оператори на език за дефиниране на данни (DDL) във всяка таблица, включително системни таблици.

* Всеки екстент и разпределение или освобождаване на страници.

* Създаване или премахване на таблица или индекс.

## LDF файлов формат

LDF файлът се състои от записи на транзакции на SQL Server, които са подредени като низ от регистрационни записи. Всеки запис на журнал има пореден номер на журнал (LSN), който е по-висок от LSN на предишния запис. Низовете са конкатенирани един след друг във файла. Благодарение на съвременните високоскоростни компютри, записите могат да бъдат вмъкнати там, където LSN2 съществува в регистрационния файл преди LSN1. Тъй като операциите се записват в сериен номер, промяната, описана от LSN2, е извършена след записа в журнала LSN1. Записите за конкретна транзакция са свързани обратно с помощта на указатели, които се използват и ускоряват връщането назад на транзакцията.
 

## Препратки

* [Файлове на бази данни и файлови групи](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroups?view=sql-server-ver15)
* [Ръководство за архитектура и управление на регистъра на транзакциите](https://learn.microsoft.com/en-us/sql/relational-databases/sql-server-transaction-log-architecture-and-management-guide?view=sql-server-ver15)

