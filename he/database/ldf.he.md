{
  "date" : "2020-11-11",
  "keywords" :[ "LDF", "הרחבה", "קובץ", "פורמט קובץ", "סוג קובץ מסד נתונים", "פורמט קובץ מסד נתונים", "קבצי מסד נתונים" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"למד על פורמט קובץ LDF וממשקי API שיכולים ליצור ולפתוח קובצי LDF.",
  "title" :"LDF - פורמט קובץ מסד נתונים של SQL Server Master",
  "linktitle" : "LDF",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
},
  "lastmod" : "2020-08-12"
}

## מהו קובץ LDF?

קובץ עם סיומת .ldf הוא קובץ יומן שמתוחזק על ידי Microsoft SQL Server שהוא מערכת ניהול מסד נתונים יחסי (RDBMS). כל העסקאות המבוצעות על קבצי מסד נתונים ראשיים ([MDF](/he/database/mdf/))(כגון הכנסה, עדכון, מחיקה) נרשמות בקובץ LDF. קבצי LDF הם רכיבים קריטיים של כל מסד נתונים. במקרה של כשל במערכת, קובץ היומן משמש לשחזור מסד הנתונים למצב עקבי. קובץ יומן העסקאות יכול להגדיל את גודלו אם העסקאות אינן מחויבות במלואן. ניתן לפתוח קבצי LDF באמצעות תוכנת Microsoft SQL Server.

## פעולות שנרשמו בקובץ LDF

קובץ יומן SQL מתעד את הפעולות הבאות:

* התחלה וסיום של כל עסקה.

* כל שינוי בנתוני נתונים (הוספה, עדכון או מחיקה). זה כולל גם שינויים על ידי נהלים מאוחסנים במערכת או הצהרות שפת הגדרת נתונים (DDL) לכל טבלה, כולל טבלאות מערכת.

* כל היקף והקצאת עמודים או ביטול הקצאה.

* יצירה או שחרור של טבלה או אינדקס.

## פורמט קובץ LDF

קובץ ה-LDF מורכב מרשומות טרנזקציות של SQL Server המסודרות כמחרוזת של רשומות יומן. לכל רשומת יומן יש מספר רצף יומן (LSN) הגבוה מה-LSN של הרשומה הקודמת. המחרוזות משורשרות זו אחרי זו בקובץ. בשל המחשבים המודרניים המהירים, ניתן להכניס רשומות היכן שה-LSN2 קיים בקובץ היומן לפני LSN1. מכיוון שהפעולות מתועדות בסדרה, השינוי המתואר על ידי LSN2 בוצע לאחר רשומת היומן LSN1. הרשומות של עסקה מסוימת מקושרות לאחור באמצעות מצביעים המשמשים ומאיצים את החזרה לאחור של העסקה.
 

## הפניות

* [קבצי מסד נתונים וקבוצות קבצים](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroups?view=sql-server-ver15)
* [מדריך ארכיטקטורת וניהול יומן עסקאות](https://learn.microsoft.com/en-us/sql/relational-databases/sql-server-transaction-log-architecture-and-management-guide?view=sql-server-ver15)

