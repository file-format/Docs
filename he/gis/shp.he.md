{
  "date" : "2019-10-11",
  "keywords" :[ "קובץ shp", "פורמט קובץ shp", "מהו קובץ shp", "קובץ", "דוגמה ל-shp", "סיומת קובץ shp","הרחבה", "פורמט" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "title" :"SHP - ESRI Shapefile",
  "description":"למד על פורמט קובץ SHP וממשקי API שיכולים ליצור ולפתוח קובצי SHP.",
  "linktitle" : "SHP",
  "menu" : {
    "docs" : {
      "parent" : "gis"
}
},
  "lastmod" : "2019-09-10"
}

## מהו קובץ SHP?

SHP הוא סיומת הקובץ עבור אחד מסוגי הקבצים העיקריים המשמשים לייצוג של ESRI Shapefile. הוא מייצג מידע גיאו-מרחבי בצורה של נתונים וקטוריים שישמשו יישומי מערכות מידע גיאוגרפיות (GIS). הפורמט פותח כמפרט פתוח על מנת להקל על יכולת פעולה הדדית בין ESRI ומוצרי תוכנה אחרים.

## ייצוג נתונים

כאמור, פורמט shapefile מתאר מידע גיאו-מרחבי של מערך נתונים כתכונות וקטוריות. תכונות וקטוריות אלו כוללות:

* נקודות
* שורות
* מצולעים

תכונות אלו בשילוב יכולות לייצג כמעט כל סוג של צורות כמו בארות מים, גבולות ארץ, נקודות מרחביות, זרימת נהרות, אגמים וכו'. לכל תכונה וקטורית יכולות להיות תכונות שמגדירות למעשה את המטרה של אותה תכונה. לדוגמה, קובץ צורה המכיל ערים של לוס אנג'לס יכול להיות בעל שם עיר וטמפרטורה כתכונות המעניקות ייצוג משמעותי לנתונים המרחביים.

## קבצים נלווים

לא ניתן להשתמש בקובץ shp עצמאי על ידי יישומי תוכנה כדי לקבל משמעות לנתונים שהוא מכיל. על מנת להבין את המידע הכלול בקובץ כזה, Shapefile עושה שימוש בקבצי חובה נוספים הבאים.

* קובץ shx - קובץ אינדקס
* קובץ dbf - קובץ dBASE המאחסן את כל התכונות של הצורות בקובץ הראשי
* קובץ prj - מאחסן מידע על הפרויקט של הקובץ

יכולים להיות גם קבצים אופציונליים אחרים שחולקים את אותו שם כמו הקובץ הראשי.

## מפרטי פורמט קובץ SHP

מפרטים פתוחים של shapefile זמינים באופן מקוון מ-ESRI בצורה של [תיאור טכני](https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf) ומפרטת את המבנה הכללי של הקובץ בפירוט. המידע בקובץ .shp הראשי מורכב מכותרות ורשומות. כותרת הקובץ באורך קבוע מלווה ברשומות באורך משתנה כאשר כל רשומה מורכבת מכותרת רשומה באורך קבוע ואחריה תוכן רשומה באורך משתנה.

### כותרת קובץ SHP ראשית

כותרת הקובץ הראשית מתחילה מתחילת הקובץ ואורכה 100 בתים. הארגון של כותרת הקובץ הראשית הזו יחד עם מיקום בתים, ערך, סוג וסדר בתים הוא כפי שמוצג בטבלה הבאה.


|Bytes|שדה|ערך|סוג|סדר בייט
---|---|---|---|---|
|0-3|קוד קובץ|9994|מספר שלם|אנדיאן גדול
|4-23|לא בשימוש|0|מספר שלם|אנדיאן גדול
|24-27|אורך הקובץ|אורך הקובץ|מספר שלם|אנדיאן גדול
|28-31|גרסה|1000|מספר שלם|ליטל אנדיאן
|32-35|סוג צורה|סוג צורה|מספר שלם|אנדיאן קטן
|36-67|מלבן תוחם מינימלי|Xmin, Ymin, Xmax ו-Ymax|כפול|אנדיאן קטן
|68-83|תיבה תוחמת|זמין, זמקס|כפולה|ליטל אנדיאן
|84-99|תיבה תוחמת|Mmin, Mmax|כפול|

יש לציין שהערך של אורך הקובץ הוא האורך הכולל של הקובץ במילים של 16 סיביות הכולל גם את חמישים מילות 16 הסיביות המרכיבות את הכותרת.

#### סוגי צורות

הערכים של שדה סוגי צורות בטבלה לעיל הם כדלקמן:


|ערך|סוג צורה
---|---|
|0|צורת אפס
|1|נקודה
|3|פוליליין
|5|מצולע
|8|MultiPoint
|11|PointZ
|13|PolyLineZ
|15|PolygonZ
|18|MultiPointZ
|21|PointM
|23|PolyLineM
|25|PolygonM
|28|MultiPointM
|31|MultiPatch

### רשומות נתונים ###

כותרת הקובץ הראשית מלווה ברשומות באורך משתנה כאשר כל רשומה מורכבת מכותרת רשומה באורך קבוע ואחריה תוכן רשומה באורך משתנה.

#### כותרת רשומה ####

כותרת הרשומה מכילה מידע על מספר הרשומה ואורך התוכן של הרשומה באורך קבוע של 8 בתים. הארגון של כותרת הרשומה הוא כמפורט להלן:


|Bytes|שדה|ערך|סוג|סדר בייט
---|---|---|---|---|
|0-3|מספר שיא|מספר שיא|מספר שלם|גדול
|4-7|אורך שיא|אורך שיא|מספר שלם|גדול

#### הקלטת תוכן ####

תוכן רשומת קובץ צורה מורכב מסוג צורה ואחריו הנתונים הגיאומטריים עבור אותה צורה. סוג צורה של 0 מייצג צורה אפס שאין לה נתונים גיאומטריים עבור הצורה. אורך תוכן הרשומה הוא השתקפות של חלקי הצורה והקודקודים. ניקח דוגמה של סוג צורת נקודה כדי לפרט כיצד רשומה מכילה מידע על סוג צורה כזה.

נקודה מייצגת מיקום גיאוגרפי מסוים בסדר X,Y כאשר כל קואורדינטה מיוצגת על ידי ערך דיוק כפול. הטבלה הבאה מציגה את הסידור של סוג צורת נקודה.


|בתים|סוג צורה|ערך|סוג|מספר|סדר בייט
---|---|---|---|---|---|
|0-3|סוג צורה|1|מספר שלם|1|קטן
|4-11|X|X|כפול|1|קטן
|12-19|Y|Y|כפול|1|Little

דוגמאות לסוגי צורות אחרים ניתן למצוא במסמך התיאור הטכני של ESRI.

## הפניות ##

* [תיאור טכני של ESRI Shapefile](https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf) מאת ESRI

