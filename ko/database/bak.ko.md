{
  "date" : "2020-11-11",
  "keywords" :[ "BAK", "확장자", "파일", "파일 형식", "BAK 파일 형식", "BAK 파일 확장자", "데이터베이스 파일 형식", "데이터베이스 파일 형식", "데이터베이스 파일" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"BAK 파일 형식과 BAK 파일을 만들고 열 수 있는 API에 대해 알아보세요.",
  "title" :"BAK 파일 형식 - 데이터베이스 백업 파일",
  "linktitle" : "BAK",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
},
  "lastmod" : "2020-12-04"
}

## .BAK 파일이란?

확장자가 .bak인 파일은 일반적으로 다른 소프트웨어 도구에서 데이터 백업을 저장하는 데 사용하는 백업 파일입니다. 데이터베이스 관점에서 BAK 파일은 Microsoft SQL Server에서 데이터베이스 내용을 저장하는 데 사용됩니다. 데이터베이스와 관련된 모든 데이터 및 파일은 어떤 이유로든 데이터베이스가 손상되거나 무효화될 수 있는 경우 검색할 수 있도록 이 파일 형식으로 저장됩니다. 백업 파일은 안전을 위해 다른 서버에 저장하고 인덱싱할 수 있습니다. 여러 응용 프로그램에서 SQL Server Management Studio, Transact-SQL 및 Windows PowerShell과 같은 BAK 파일을 만들 수 있습니다.

## BAK 파일 형식

BAK 파일의 내부 세부 사항은 알려져 있지 않지만 MTF(Microsoft Tape Format)를 기반으로 하는 것으로 널리 추정됩니다. MTF 사양을 사용할 수 있으며 파일 구조를 이해하기 위해 참조할 수 있습니다. 이 문서는 저장소 관리 작업, 테이프 드라이브 및 파일 시스템에 대한 일반적인 지식이 있는 모든 사람을 위해 MTF 저장소에 대한 세부 정보를 제공합니다.

### 데이터 세트

데이터 세트는 데이터 백업 또는 복원 중에 저장 매체(테이프, 광 디스크 등)에 기록되는 개체의 모음입니다. 데이터 세트는 대용량 데이터의 경우 여러 미디어로 구성됩니다.

### 기동특무부대의 기본 요소

MTF 파일은 빌딩 블록을 구성하는 몇 가지 기본 요소로 구성됩니다. 이러한 요소는 다음과 같습니다.

#### 설명자 블록

디스크립터 블록(DBLK)은 형식 제어에 사용되며 MTF 파일의 기본 기반을 구성합니다. 단일 MTF 파일은 각각의 고유한 역할에 대해 여러 DBLK를 정의합니다. 각 DBLK는 가변 길이 데이터 블록으로 다음 네 부분으로 나뉩니다.

* '공통 블록 헤더' - 모든 DBLK에 공통되는 고정 길이 구조입니다. 이것은 필요한 유일한 블록 헤더입니다.
* `DBLK 유형 정보` - 정의되는 DBLK 유형에 따른 고정 길이 블록
* 'Operating System Data' - DBLK의 종류와 운영체제에 따라 정의되는 특정 데이터
* `DBLK 정보' - 고정 길이 DBLK 정보로 저장할 수 없는 가변 길이 DBLK 특정 정보.

 {{< figure src="../bak.png" alt="Microsoft SQL 백업 파일 형식" >}}

#### 데이터 스트림

MTF 파일의 데이터 스트림은 데이터 캡슐화 및 정렬에 사용됩니다. 스트림 헤더와 스트림 데이터로 구성됩니다. 스트림 헤더는 단일 유형의 스트림 데이터만 캡슐화할 수 있습니다.

{{< figure src="../bak_datastream.png" alt="Microsoft SQL 백업 파일 형식" >}}

#### 파일마크

파일 마크는 미디어 내에서 논리적 분리 및 빠른 액세스를 위해 사용됩니다. 파일 표시는 사용 중인 장치가 파일 표시를 제공하지 않는 경우 장치 드라이버 또는 Soft Filemark Descriptor 블록을 사용하여 에뮬레이트됩니다.

## 참조 ##

* [[MS-BCP]: 대량 복사 형식](https://learn.microsoft.com/en-us/openspecs/sql_data_portability/ms-bcp/54965c4d-34c7-400d-b970-1007984315a5)

