{
  "date" : "2020-11-11",
  "keywords" :[ "BAK", "επέκταση", "αρχείο", "μορφή αρχείου", "Τύπος αρχείου BAK", "Επέκταση αρχείου BAK", "Τύπος αρχείου βάσης δεδομένων", "Μορφή αρχείου βάσης δεδομένων", "αρχεία βάσης δεδομένων" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Μάθετε σχετικά με τη μορφή αρχείου BAK και τα API που μπορούν να δημιουργήσουν και να ανοίξουν αρχεία BAK.",
  "title" :"Μορφή αρχείου BAK - Εφεδρικό αρχείο βάσης δεδομένων",
  "linktitle" : "BAK",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
},
  "lastmod" : "2020-12-04"
}

## Τι είναι ένα αρχείο BAK;

Ένα αρχείο με επέκταση .bak είναι συνήθως ένα αρχείο αντιγράφου ασφαλείας που χρησιμοποιείται από διαφορετικά εργαλεία λογισμικού για την αποθήκευση αντιγράφων ασφαλείας δεδομένων. Από την άποψη της βάσης δεδομένων, ένα αρχείο BAK χρησιμοποιείται από τον Microsoft SQL Server για την αποθήκευση των περιεχομένων μιας βάσης δεδομένων. Όλα τα δεδομένα και τα αρχεία που σχετίζονται με τη βάση δεδομένων αποθηκεύονται σε αυτήν τη μορφή αρχείου για ανάκτηση σε περίπτωση που η βάση δεδομένων μπορεί να καταστραφεί ή να μην είναι έγκυρη για οποιονδήποτε λόγο. Τα αρχεία αντιγράφων ασφαλείας μπορούν να αποθηκευτούν και να καταχωρηθούν σε άλλους διακομιστές για λόγους ασφαλείας. Πολλές εφαρμογές μπορούν να δημιουργήσουν αρχεία BAK όπως το SQL Server Management Studio, το Transact-SQL και το Windows PowerShell.

## Μορφή αρχείου BAK

Οι εσωτερικές λεπτομέρειες ενός αρχείου BAK δεν είναι γνωστές, αλλά θεωρείται ευρέως ότι βασίζεται στο Microsoft Tape Format (MTF). Οι προδιαγραφές MTF είναι διαθέσιμες και μπορούν να αναφερθούν για την κατανόηση της δομής του αρχείου. Το έγγραφο παρέχει λεπτομέρειες σχετικά με την αποθήκευση MTF για οποιονδήποτε έχει γενικές γνώσεις σχετικά με τις λειτουργίες διαχείρισης αποθήκευσης, τις μονάδες μαγνητοταινίας και τα συστήματα αρχείων.

### Σύνολα δεδομένων

Ένα σύνολο δεδομένων είναι μια συλλογή αντικειμένων που εγγράφονται σε ένα μέσο αποθήκευσης (κασέτα, οπτικός δίσκος, κ.λπ.) κατά τη διάρκεια δημιουργίας αντιγράφων ασφαλείας ή επαναφοράς δεδομένων. Τα σύνολα δεδομένων αποτελούνται από πολλαπλά μέσα σε περίπτωση μεγάλου όγκου δεδομένων.

### Θεμελιώδη στοιχεία του MTF

Ένα αρχείο MTF αποτελείται από ορισμένα θεμελιώδη στοιχεία που αποτελούν τα δομικά στοιχεία του. Αυτά τα στοιχεία είναι:

#### Περιγραφικοί μπλοκ

Τα μπλοκ περιγραφών (DBLK) χρησιμοποιούνται για έλεγχο μορφής και αποτελούν τα κύρια θεμέλια ενός αρχείου MTF. Ένα μόνο αρχείο MTF ορίζει πολλαπλά DBLK για κάθε μοναδικό ρόλο. Κάθε DBLK είναι ένα μπλοκ δεδομένων μεταβλητού μήκους που χωρίζεται στα ακόλουθα τέσσερα μέρη:

* `Common Block Header` - Δομή σταθερού μήκους που είναι κοινή σε όλα τα DBLK. Αυτή είναι η μόνη κεφαλίδα μπλοκ που απαιτείται.
* «Πληροφορίες Τύπου DBLK» - Μπλοκ σταθερού μήκους ειδικά για τον τύπο DBLK που ορίζεται
* «Δεδομένα λειτουργικού συστήματος» - Συγκεκριμένα δεδομένα που ορίζονται με βάση τον τύπο του DBLK και τα λειτουργικά συστήματα
* «Πληροφορίες DBLK» - Πληροφορίες μεταβλητού μήκους DBLK που δεν μπορούν να αποθηκευτούν με τις πληροφορίες DBLK σταθερού μήκους.

 {{< figure src="../bak.png" alt="Μορφή αρχείου αντιγράφων ασφαλείας SQL της Microsoft" >}}

#### Ροή δεδομένων

Οι ροές δεδομένων σε ένα αρχείο MTF χρησιμοποιούνται για ενθυλάκωση και ευθυγράμμιση δεδομένων. Αποτελείται από μια κεφαλίδα ροής, ακολουθούμενη από τα δεδομένα ροής. Μια κεφαλίδα ροής μπορεί να ενσωματώσει μόνο έναν τύπο δεδομένων ροής.

{{< figure src="../bak_datastream.png" alt="Μορφή αρχείου αντιγράφων ασφαλείας SQL της Microsoft" >}}

#### Σήματα αρχείου

Ένα σήμα αρχείου χρησιμοποιείται για λογικό διαχωρισμό και γρήγορη πρόσβαση σε ένα μέσο. Τα σήματα αρχείων προσομοιώνονται από το πρόγραμμα οδήγησης συσκευής ή με τη χρήση του μπλοκ Soft Filemark Descriptor σε περίπτωση που η συσκευή που χρησιμοποιείται δεν παρέχει σήματα αρχείου.

## Βιβλιογραφικές αναφορές ##

* [[MS-BCP]: Μορφή μαζικής αντιγραφής](https://learn.microsoft.com/en-us/openspecs/sql_data_portability/ms-bcp/54965c4d-34c7-400d-b970-1007984315a5?MSDNredirected)from

