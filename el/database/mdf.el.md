{
  "date" : "2020-11-11",
  "keywords" :[ "MDF", "επέκταση", "αρχείο", "μορφή αρχείου", "Τύπος αρχείου βάσης δεδομένων", "Μορφή αρχείου βάσης δεδομένων", "αρχεία βάσης δεδομένων" ],
  "author" : {
    "display_name" : "Kashif Iqbal"
},
  "draft" : "false",
  "toc" : true,
  "description" :"Μάθετε σχετικά με τη μορφή αρχείου MDF και τα API που μπορούν να δημιουργήσουν και να ανοίξουν αρχεία MDF.",
  "title" :"Μορφή αρχείου MDF - Κύριο αρχείο βάσης δεδομένων διακομιστή SQL",
  "linktitle" : "MDF",
  "menu" : {
    "docs" : {
      "parent" : "database"
}
},
  "lastmod" : "2020-08-12"
}

## Τι είναι ένα αρχείο MDF;

Ένα αρχείο με επέκταση .mdf είναι ένα κύριο αρχείο βάσης δεδομένων που χρησιμοποιείται από τον [Microsoft SQL Server](https://en.wikipedia.org/wiki/Microsoft_SQL_Server) για την αποθήκευση δεδομένων χρήστη. Είναι πρωταρχικής σημασίας καθώς όλα τα δεδομένα αποθηκεύονται σε αυτό το αρχείο. Το αρχείο MDF αποθηκεύει δεδομένα χρηστών σε σχεσιακές βάσεις δεδομένων σε στήλες, σειρές, πεδία, ευρετήρια, προβολές και πίνακες μορφής. Ο SQL Server επιτρέπει να ορίσετε ρυθμίσεις αυτόματης ανάπτυξης και αυτόματης συρρίκνωσης για να έχουν θετικό αντίκτυπο στην απόδοση της βάσης δεδομένων. Τα αρχεία MDF μπορούν να φορτωθούν και να προσαρτηθούν σε μια βάση δεδομένων χρησιμοποιώντας τον Microsoft SQL Server. Τα αρχεία MDF έχουν τύπο μιμικής εφαρμογής/οκτάδας ροής.

## Μορφή αρχείου MDF

Η βασική μονάδα αποθήκευσης δεδομένων στον SQL Server είναι μια σελίδα. Μια σελίδα αποθήκευσης που έχει εκχωρηθεί σε βάση δεδομένων χωρίζεται σε λογικές σελίδες με αρίθμηση από 0 έως n. Μια μεμονωμένη σελίδα ξεκινά με μια κεφαλίδα 96 byte που περιλαμβάνει το αναγνωριστικό σελίδας, τον τύπο της δομής στην οποία ανήκει η σελίδα, τον αριθμό των εγγραφών στη σελίδα και τους δείκτες προς την προηγούμενη και την επόμενη σελίδα.

### Δομή αρχείου

Ένα αρχείο MDF έχει την ακόλουθη δομή δεδομένων.

* Σελίδα 0: Κεφαλίδα
* Σελίδα 1: Πρώτο PFS
* Σελίδα 2: Πρώτο GAM
* Σελίδα 3: Πρώτο SGAM
* Σελίδα 4: Αχρησιμοποίητο
* Σελίδα 5: Αχρησιμοποίητο
* Σελίδα 6: Πρώτο DCM
* Σελίδα 7: Πρώτη BCM

#### Κεφαλίδα αρχείου

Ο αριθμός σελίδας 0 όλων των αρχείων περιέχει μια κεφαλίδα που αποθηκεύει μεταδεδομένα για το αρχείο.

#### Ελεύθερος χώρος σελίδας (PFS)
Το PFS προσδιορίζει την κατάσταση κατανομής και καθορίζει την ποσότητα του ελεύθερου χώρου.

* Bit 1: Υποδεικνύει εάν η σελίδα έχει εκχωρηθεί ή όχι.
* Bit 2: Υποδεικνύει εάν η σελίδα είναι από μικτή έκταση.
* Bit 3: Υποδεικνύει ότι αυτή η σελίδα είναι σελίδα IAM.
* Bit 4: Υποδεικνύει ότι αυτή η σελίδα περιέχει εγγραφές φαντασμάτων
* Bits 5 έως 7: Μια συνδυασμένη τιμή τριών bit, η οποία υποδεικνύει την πληρότητα της σελίδας ως εξής:
* 0: Η σελίδα είναι άδεια
* 1: Η σελίδα είναι 1–50% γεμάτη
* 2: Η σελίδα είναι 51–80% γεμάτη
* 3: Η σελίδα είναι 81–95% γεμάτη
* 4: Η σελίδα είναι 96–100% γεμάτη

## βιβλιογραφικές αναφορές

* [Αρχεία βάσης δεδομένων και ομάδες αρχείων](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-files-and-filegroups?view=sql-server-ver15)
* [Αποσύνδεση και επισύναψη βάσης δεδομένων - SQL Server](https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-detach-and-attach-sql-server?view=sql-server -έκδοση 15)
* [Analyzing SQL Server Data File Anatomy](https://blog.pythian.com/analyzing-sql-server-data-file-anatomy/)

