{
  "date" : "2021-06-29",
  "keywords" :["ICNS","扩展名","文件","格式","图像","苹果图标图像","macOS","苹果","图标"],
  "author" : {
    "display_name" : "Sami Cheema"
},
  "draft" : "false",
  "toc" : true,
  "title" :"ICNS - 苹果图标图像",
  "description":"了解 ICNS 文件格式和可以创建和打开 ICNS 文件的 API。",
  "linktitle" : "ICNS",
  "menu" : {
    "docs" : {
      "parent" : "image"
}
},
  "lastmod" : "2021-06-29"
}

## 什么是一 .icns 文件？ ##

macOS 程序使用的图标格式称为 ICNS 文件。它允许 1 位和 8 位 alpha 波段并保存一张或多张图片，通常由 [PNG](/zh/image/png/) 文档制作。 macOS 浏览器和界面中的程序图标使用 ICNS 文件显示。

根据位置的不同，同一个风格的图标可以有多种设置。 ICNS 格式经历了许多变化，并发展到现在可以用作各种兼容格式的基础。以下是您需要了解的其他一些要点：

* IconFamily 资源、Macintosh 图标、Macintosh OS X 图标、Mac OS 图标、Apple 图标、Mac OS X 图标资源和 Mac OS 图标资源是其他一些名称。
* 对于图标信息，使用资源分支中的来源。
* 在大多数情况下，一个文件包含许多图像。支持 1612 像素正方形和 1024、512、256、128、48、32 和 16 像素正方形的图片尺寸。


## ICNS 文件格式 ##

ICNS 数据格式是一个或多个图像的封装，支持 1 位波段和多种图像状态。
操作系统可以调整图标图片的大小以适应所需的显示大小。较大的图标图片通常保存为 [JPEG](/zh/image/jpeg/) 2000 或 [PNG](/zh/image/png/) 文件。一种类型的压缩和未压缩 ICNS 文件都是可能的。

标题和二进制图标数据构成了 ICNS 文件的结构。标头包含 8 个字节的数据，其中 4 个是魔术字面量，其中 4 个是文件长度。每个图标图片的类型和大小都存储在图标数据部分，后面是二进制图像数据。图片大小决定了二进制部分的大小。

## 技术规格##

### 标题###

|偏移|尺寸|目标
---|---|---|
|0|4|魔术字面量，必须是 "icns" (0x69, 0x63, 0x6e, 0x73)
|4|4|文件长度，以字节为单位，msb 优先


### 图标数据###

|偏移|尺寸|目标
---|---|---|
|0|4|图标类型
|4|4|数据长度，以字节为单位（包括类型和长度），msb在前
|8|变量|图标数据

＃＃＃ 压缩 ＃＃＃

像素数据在某种程度上被压缩。 32 位（“is32"、“il32"、“ih32"、“it32"）和 ARGB（“ic04"、“ic05"）像素通常以类似于 PackBits 的方式压缩（按通道）。

|前导值|尾字节|结果（未压缩）
---|---|---|
|0 - 127|1 - 128|1 - 128 字节
|128 - 255|1 字节|3 - 130 份

## 参考 ＃＃

* [ICNS - 维基百科](https://en.wikipedia.org/wiki/Apple_Icon_Image_format)

